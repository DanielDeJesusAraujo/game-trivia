{"ast":null,"code":"import _regeneratorRuntime from\"/home/daniel/Documentos/TRYBE-PROJECTS/game-trivia/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/daniel/Documentos/TRYBE-PROJECTS/game-trivia/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/home/daniel/Documentos/TRYBE-PROJECTS/game-trivia/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _classCallCheck from\"/home/daniel/Documentos/TRYBE-PROJECTS/game-trivia/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/daniel/Documentos/TRYBE-PROJECTS/game-trivia/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/daniel/Documentos/TRYBE-PROJECTS/game-trivia/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/daniel/Documentos/TRYBE-PROJECTS/game-trivia/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import{connect}from'react-redux';import fetchApi from'../services/fetchApi';import{saveToken}from'../services/storage';import{playerAction,tokenAction}from'../redux/actions/index';import LogoStyle from'../styles/LogoStyle';import MainStyle from'../styles/MainStyle';import{BoxLoginStyle,BgStyle}from'../styles/loginStyles/LoginSyles';import ButtonStyle from'../styles/ButtonStyle';import IconTrybe from'../styles/IconTrybe';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(){var _this;_classCallCheck(this,Login);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={name:'',email:'',isDisabled:true};_this.onInputChange=function(_ref){var _ref$target=_ref.target,name=_ref$target.name,value=_ref$target.value;_this.setState(_defineProperty({},name,value),function(){var _this$state=_this.state,userName=_this$state.name,email=_this$state.email;var validation=userName.length===0||email.length===0;_this.setState({isDisabled:validation});});};_this.handleClick=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _this$props,history,dispatch,filter,token;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$props=_this.props,history=_this$props.history,dispatch=_this$props.dispatch,filter=_this$props.filter;_context.next=3;return fetchApi();case 3:token=_context.sent;saveToken(token);if(!filter){dispatch(tokenAction(token));}dispatch(playerAction(_this.state));history.push('/playpage');case 8:case\"end\":return _context.stop();}}},_callee);}));return _this;}_createClass(Login,[{key:\"render\",value:function render(){var _this$state2=this.state,name=_this$state2.name,email=_this$state2.email,isDisabled=_this$state2.isDisabled;return/*#__PURE__*/_jsxs(MainStyle,{children:[/*#__PURE__*/_jsx(LogoStyle,{}),/*#__PURE__*/_jsx(BgStyle,{}),/*#__PURE__*/_jsxs(BoxLoginStyle,{children:[/*#__PURE__*/_jsx(\"input\",{value:email,name:\"email\",type:\"email\",onChange:this.onInputChange,id:\"input-gravatar-email\",\"data-testid\":\"input-gravatar-email\",placeholder:\"Qual \\xE9 o seu e-mail do gravatar?\"}),/*#__PURE__*/_jsx(\"input\",{value:name,name:\"name\",type:\"text\",onChange:this.onInputChange,id:\"input-player-name\",\"data-testid\":\"input-player-name\",placeholder:\"Qual \\xE9 o seu nome?\"}),/*#__PURE__*/_jsx(ButtonStyle,{type:\"button\",disabled:isDisabled,\"data-testid\":\"btn-play\",onClick:this.handleClick,children:\"Play\"})]}),/*#__PURE__*/_jsx(IconTrybe,{})]});}}]);return Login;}(Component);var mapStateToProps=function mapStateToProps(state){return{filter:state.fetch.filter};};export default connect(mapStateToProps)(Login);","map":{"version":3,"names":["React","Component","connect","fetchApi","saveToken","playerAction","tokenAction","LogoStyle","MainStyle","BoxLoginStyle","BgStyle","ButtonStyle","IconTrybe","Login","state","name","email","isDisabled","onInputChange","target","value","setState","userName","validation","length","handleClick","props","history","dispatch","filter","token","push","mapStateToProps","fetch"],"sources":["/home/daniel/Documentos/TRYBE-PROJECTS/game-trivia/src/pages/Login.jsx"],"sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport fetchApi from '../services/fetchApi';\nimport { saveToken } from '../services/storage';\nimport { playerAction, tokenAction } from '../redux/actions/index';\nimport LogoStyle from '../styles/LogoStyle';\nimport MainStyle from '../styles/MainStyle';\nimport { BoxLoginStyle, BgStyle } from '../styles/loginStyles/LoginSyles';\nimport ButtonStyle from '../styles/ButtonStyle';\nimport IconTrybe from '../styles/IconTrybe';\n\nclass Login extends Component {\n  state = {\n    name: '',\n    email: '',\n    isDisabled: true,\n  };\n\n  onInputChange = ({ target: { name, value } }) => {\n    this.setState({ [name]: value }, () => {\n      const { name: userName, email } = this.state;\n      const validation = userName.length === 0 || email.length === 0;\n      this.setState({ isDisabled: validation });\n    });\n  };\n\n  handleClick = async () => {\n    const { history, dispatch, filter } = this.props;\n    const token = await fetchApi();\n    saveToken(token);\n    if (!filter) {\n      dispatch(tokenAction(token));\n    }\n    dispatch(playerAction(this.state));\n    history.push('/playpage');\n  };\n\n  render() {\n    const { name, email, isDisabled } = this.state;\n    return (\n      <MainStyle>\n        <LogoStyle />\n        <BgStyle />\n        <BoxLoginStyle>\n          <input\n            value={ email }\n            name=\"email\"\n            type=\"email\"\n            onChange={ this.onInputChange }\n            id=\"input-gravatar-email\"\n            data-testid=\"input-gravatar-email\"\n            placeholder=\"Qual é o seu e-mail do gravatar?\"\n          />\n          <input\n            value={ name }\n            name=\"name\"\n            type=\"text\"\n            onChange={ this.onInputChange }\n            id=\"input-player-name\"\n            data-testid=\"input-player-name\"\n            placeholder=\"Qual é o seu nome?\"\n          />\n          <ButtonStyle\n            type=\"button\"\n            disabled={ isDisabled }\n            data-testid=\"btn-play\"\n            onClick={ this.handleClick }\n          >\n            Play\n          </ButtonStyle>\n        </BoxLoginStyle>\n        <IconTrybe />\n      </MainStyle>\n    );\n  }\n}\n\nLogin.propTypes = {\n  history: PropTypes.shape({\n    push: PropTypes.func.isRequired,\n  }).isRequired,\n  dispatch: PropTypes.func.isRequired,\n  filter: PropTypes.bool.isRequired,\n};\n\nconst mapStateToProps = (state) => ({\n  filter: state.fetch.filter,\n});\n\nexport default connect(mapStateToProps)(Login);\n"],"mappings":"07BAAA,MAAOA,MAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,OAAT,KAAwB,aAAxB,CAEA,MAAOC,SAAP,KAAqB,sBAArB,CACA,OAASC,SAAT,KAA0B,qBAA1B,CACA,OAASC,YAAT,CAAuBC,WAAvB,KAA0C,wBAA1C,CACA,MAAOC,UAAP,KAAsB,qBAAtB,CACA,MAAOC,UAAP,KAAsB,qBAAtB,CACA,OAASC,aAAT,CAAwBC,OAAxB,KAAuC,kCAAvC,CACA,MAAOC,YAAP,KAAwB,uBAAxB,CACA,MAAOC,UAAP,KAAsB,qBAAtB,C,2FAEMC,M,uTACJC,K,CAAQ,CACNC,IAAI,CAAE,EADA,CAENC,KAAK,CAAE,EAFD,CAGNC,UAAU,CAAE,IAHN,C,OAMRC,a,CAAgB,cAAiC,sBAA9BC,MAA8B,CAApBJ,IAAoB,aAApBA,IAAoB,CAAdK,KAAc,aAAdA,KAAc,CAC/C,MAAKC,QAAL,oBAAiBN,IAAjB,CAAwBK,KAAxB,EAAiC,UAAM,CACrC,gBAAkC,MAAKN,KAAvC,CAAcQ,QAAd,aAAQP,IAAR,CAAwBC,KAAxB,aAAwBA,KAAxB,CACA,GAAMO,WAAU,CAAGD,QAAQ,CAACE,MAAT,GAAoB,CAApB,EAAyBR,KAAK,CAACQ,MAAN,GAAiB,CAA7D,CACA,MAAKH,QAAL,CAAc,CAAEJ,UAAU,CAAEM,UAAd,CAAd,EACD,CAJD,EAKD,C,OAEDE,W,wEAAc,+LAC0B,MAAKC,KAD/B,CACJC,OADI,aACJA,OADI,CACKC,QADL,aACKA,QADL,CACeC,MADf,aACeA,MADf,uBAEQ1B,SAAQ,EAFhB,QAEN2B,KAFM,eAGZ1B,SAAS,CAAC0B,KAAD,CAAT,CACA,GAAI,CAACD,MAAL,CAAa,CACXD,QAAQ,CAACtB,WAAW,CAACwB,KAAD,CAAZ,CAAR,CACD,CACDF,QAAQ,CAACvB,YAAY,CAAC,MAAKS,KAAN,CAAb,CAAR,CACAa,OAAO,CAACI,IAAR,CAAa,WAAb,EARY,sD,yDAWd,iBAAS,CACP,iBAAoC,KAAKjB,KAAzC,CAAQC,IAAR,cAAQA,IAAR,CAAcC,KAAd,cAAcA,KAAd,CAAqBC,UAArB,cAAqBA,UAArB,CACA,mBACE,MAAC,SAAD,yBACE,KAAC,SAAD,IADF,cAEE,KAAC,OAAD,IAFF,cAGE,MAAC,aAAD,yBACE,cACE,KAAK,CAAGD,KADV,CAEE,IAAI,CAAC,OAFP,CAGE,IAAI,CAAC,OAHP,CAIE,QAAQ,CAAG,KAAKE,aAJlB,CAKE,EAAE,CAAC,sBALL,CAME,cAAY,sBANd,CAOE,WAAW,CAAC,qCAPd,EADF,cAUE,cACE,KAAK,CAAGH,IADV,CAEE,IAAI,CAAC,MAFP,CAGE,IAAI,CAAC,MAHP,CAIE,QAAQ,CAAG,KAAKG,aAJlB,CAKE,EAAE,CAAC,mBALL,CAME,cAAY,mBANd,CAOE,WAAW,CAAC,uBAPd,EAVF,cAmBE,KAAC,WAAD,EACE,IAAI,CAAC,QADP,CAEE,QAAQ,CAAGD,UAFb,CAGE,cAAY,UAHd,CAIE,OAAO,CAAG,KAAKQ,WAJjB,kBAnBF,GAHF,cA+BE,KAAC,SAAD,IA/BF,GADF,CAmCD,C,mBA/DiBxB,S,EA0EpB,GAAM+B,gBAAe,CAAG,QAAlBA,gBAAkB,CAAClB,KAAD,QAAY,CAClCe,MAAM,CAAEf,KAAK,CAACmB,KAAN,CAAYJ,MADc,CAAZ,EAAxB,CAIA,cAAe3B,QAAO,CAAC8B,eAAD,CAAP,CAAyBnB,KAAzB,CAAf"},"metadata":{},"sourceType":"module"}