{"ast":null,"code":"var _jsxFileName = \"/home/daniel/Documentos/TRYBE-PROJECTS/game-trivia/src/pages/Game.jsx\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport Header from '../components/Header';\nimport fetchTrivia from '../services/fetchTrivia';\nimport Questions from '../components/Questions';\nimport MainGame from '../styles/gameStyles/MainGame';\nimport FooterGame from '../styles/gameStyles/FooterGame';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Game extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      questions: [],\n      indexQuestion: 0\n    };\n\n    this.handleNext = () => {\n      const {\n        indexQuestion,\n        questions\n      } = this.state;\n      const {\n        history\n      } = this.props;\n\n      if (indexQuestion < questions.length - 1) {\n        this.setState(prevState => ({\n          indexQuestion: prevState.indexQuestion + 1\n        }));\n      } else history.push('/feedback');\n    };\n  }\n\n  async componentDidMount() {\n    const {\n      url\n    } = this.props;\n    const data = await fetchTrivia(url);\n    const invalidToken = 3;\n    const validationToken = data.response_code === invalidToken;\n\n    if (validationToken) {\n      const {\n        history\n      } = this.props;\n      localStorage.removeItem('token');\n      history.push('/');\n    } else {\n      this.setState({\n        questions: data.results\n      });\n    }\n  }\n\n  render() {\n    const {\n      questions,\n      indexQuestion\n    } = this.state;\n    const {\n      history\n    } = this.props;\n    return /*#__PURE__*/_jsxDEV(MainGame, {\n      children: [/*#__PURE__*/_jsxDEV(Header, {\n        history: history\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 9\n      }, this), questions.length > 0 && /*#__PURE__*/_jsxDEV(Questions, {\n        handleNext: this.handleNext,\n        question: questions[indexQuestion]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(FooterGame, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  url: state.fetch.url\n});\n\nGame.propTypes = {\n  history: PropTypes.shape({\n    push: PropTypes.func.isRequired\n  }).isRequired,\n  url: PropTypes.string.isRequired\n};\nexport default connect(mapStateToProps)(Game);","map":{"version":3,"names":["React","Component","connect","PropTypes","Header","fetchTrivia","Questions","MainGame","FooterGame","Game","state","questions","indexQuestion","handleNext","history","props","length","setState","prevState","push","componentDidMount","url","data","invalidToken","validationToken","response_code","localStorage","removeItem","results","render","mapStateToProps","fetch","propTypes","shape","func","isRequired","string"],"sources":["/home/daniel/Documentos/TRYBE-PROJECTS/game-trivia/src/pages/Game.jsx"],"sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport Header from '../components/Header';\nimport fetchTrivia from '../services/fetchTrivia';\nimport Questions from '../components/Questions';\nimport MainGame from '../styles/gameStyles/MainGame';\nimport FooterGame from '../styles/gameStyles/FooterGame';\n\nclass Game extends Component {\n  state = {\n    questions: [],\n    indexQuestion: 0,\n  };\n\n  async componentDidMount() {\n    const { url } = this.props;\n    const data = await fetchTrivia(url);\n    const invalidToken = 3;\n    const validationToken = data.response_code === invalidToken;\n    if (validationToken) {\n      const { history } = this.props;\n      localStorage.removeItem('token');\n      history.push('/');\n    } else {\n      this.setState({ questions: data.results });\n    }\n  }\n\n  handleNext = () => {\n    const { indexQuestion, questions } = this.state;\n    const { history } = this.props;\n    if (indexQuestion < questions.length - 1) {\n      this.setState((prevState) => ({\n        indexQuestion: prevState.indexQuestion + 1,\n      }));\n    } else history.push('/feedback');\n  };\n\n  render() {\n    const { questions, indexQuestion } = this.state;\n    const { history } = this.props;\n    return (\n      <MainGame>\n        <Header history={ history } />\n        { questions.length > 0 && (\n          <Questions\n            handleNext={ this.handleNext }\n            question={ questions[indexQuestion] }\n          />) }\n        <FooterGame />\n      </MainGame>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  url: state.fetch.url,\n});\n\nGame.propTypes = {\n  history: PropTypes.shape({\n    push: PropTypes.func.isRequired,\n  }).isRequired,\n  url: PropTypes.string.isRequired,\n};\n\nexport default connect(mapStateToProps)(Game);\n"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,WAAP,MAAwB,yBAAxB;AACA,OAAOC,SAAP,MAAsB,yBAAtB;AACA,OAAOC,QAAP,MAAqB,+BAArB;AACA,OAAOC,UAAP,MAAuB,iCAAvB;;;AAEA,MAAMC,IAAN,SAAmBR,SAAnB,CAA6B;EAAA;IAAA;IAAA,KAC3BS,KAD2B,GACnB;MACNC,SAAS,EAAE,EADL;MAENC,aAAa,EAAE;IAFT,CADmB;;IAAA,KAoB3BC,UApB2B,GAoBd,MAAM;MACjB,MAAM;QAAED,aAAF;QAAiBD;MAAjB,IAA+B,KAAKD,KAA1C;MACA,MAAM;QAAEI;MAAF,IAAc,KAAKC,KAAzB;;MACA,IAAIH,aAAa,GAAGD,SAAS,CAACK,MAAV,GAAmB,CAAvC,EAA0C;QACxC,KAAKC,QAAL,CAAeC,SAAD,KAAgB;UAC5BN,aAAa,EAAEM,SAAS,CAACN,aAAV,GAA0B;QADb,CAAhB,CAAd;MAGD,CAJD,MAIOE,OAAO,CAACK,IAAR,CAAa,WAAb;IACR,CA5B0B;EAAA;;EAMJ,MAAjBC,iBAAiB,GAAG;IACxB,MAAM;MAAEC;IAAF,IAAU,KAAKN,KAArB;IACA,MAAMO,IAAI,GAAG,MAAMjB,WAAW,CAACgB,GAAD,CAA9B;IACA,MAAME,YAAY,GAAG,CAArB;IACA,MAAMC,eAAe,GAAGF,IAAI,CAACG,aAAL,KAAuBF,YAA/C;;IACA,IAAIC,eAAJ,EAAqB;MACnB,MAAM;QAAEV;MAAF,IAAc,KAAKC,KAAzB;MACAW,YAAY,CAACC,UAAb,CAAwB,OAAxB;MACAb,OAAO,CAACK,IAAR,CAAa,GAAb;IACD,CAJD,MAIO;MACL,KAAKF,QAAL,CAAc;QAAEN,SAAS,EAAEW,IAAI,CAACM;MAAlB,CAAd;IACD;EACF;;EAYDC,MAAM,GAAG;IACP,MAAM;MAAElB,SAAF;MAAaC;IAAb,IAA+B,KAAKF,KAA1C;IACA,MAAM;MAAEI;IAAF,IAAc,KAAKC,KAAzB;IACA,oBACE,QAAC,QAAD;MAAA,wBACE,QAAC,MAAD;QAAQ,OAAO,EAAGD;MAAlB;QAAA;QAAA;QAAA;MAAA,QADF,EAEIH,SAAS,CAACK,MAAV,GAAmB,CAAnB,iBACA,QAAC,SAAD;QACE,UAAU,EAAG,KAAKH,UADpB;QAEE,QAAQ,EAAGF,SAAS,CAACC,aAAD;MAFtB;QAAA;QAAA;QAAA;MAAA,QAHJ,eAOE,QAAC,UAAD;QAAA;QAAA;QAAA;MAAA,QAPF;IAAA;MAAA;MAAA;MAAA;IAAA,QADF;EAWD;;AA5C0B;;AA+C7B,MAAMkB,eAAe,GAAIpB,KAAD,KAAY;EAClCW,GAAG,EAAEX,KAAK,CAACqB,KAAN,CAAYV;AADiB,CAAZ,CAAxB;;AAIAZ,IAAI,CAACuB,SAAL,GAAiB;EACflB,OAAO,EAAEX,SAAS,CAAC8B,KAAV,CAAgB;IACvBd,IAAI,EAAEhB,SAAS,CAAC+B,IAAV,CAAeC;EADE,CAAhB,EAENA,UAHY;EAIfd,GAAG,EAAElB,SAAS,CAACiC,MAAV,CAAiBD;AAJP,CAAjB;AAOA,eAAejC,OAAO,CAAC4B,eAAD,CAAP,CAAyBrB,IAAzB,CAAf"},"metadata":{},"sourceType":"module"}